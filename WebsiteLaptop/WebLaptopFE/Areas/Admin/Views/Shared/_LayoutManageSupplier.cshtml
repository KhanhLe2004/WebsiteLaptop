<!--
=========================================================
* Material Dashboard 2 - v3.1.0
=========================================================

* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2023 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="76x76" href="/LayoutAdmin/assets/img/apple-icon.png">
    <link rel="icon" type="image/png" href="/LayoutAdmin/assets/img/favicon.png">
    <title>
        Admin
    </title>
    <!--     Fonts and icons     -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
    <!-- Nucleo Icons -->
    <link href="/LayoutAdmin/assets/css/nucleo-icons.css" rel="stylesheet" />
    <link href="/LayoutAdmin/assets/css/nucleo-svg.css" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <!-- CSS Files -->
    <link id="pagestyle" href="/LayoutAdmin/assets/css/material-dashboard.css?v=3.1.0" rel="stylesheet" />
    <!-- Nepcha Analytics (nepcha.com) -->
    <!-- Nepcha is a easy-to-use web analytics. No cookies and fully compliant with GDPR, CCPA and PECR. -->
    <script defer data-site="YOUR_DOMAIN_HERE" src="https://api.nepcha.com/js/nepcha-analytics.js"></script>
</head>

<body class="g-sidenav-show  bg-gray-200">
    <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3   bg-gradient-dark" id="sidenav-main">
        <hr class="horizontal light mt-0 mb-2">
            @{
                var roleIdMenu = Context.Session.GetString("RoleId");
                // Helper function để kiểm tra quyền
                Func<string, bool> HasPermissionMenu = (controllerName) =>
                {
                    if (string.IsNullOrEmpty(roleIdMenu) || string.IsNullOrEmpty(controllerName))
                        return false;

                    if (controllerName == "Dashboard" || controllerName == "ManageProfile")
                        return true;

                    if (roleIdMenu == "ADM" || roleIdMenu == "CCH")
                        return true;

                    if (roleIdMenu == "ST")
                        return controllerName == "ManageStockImport" || controllerName == "ManageStockExport";

                    if (roleIdMenu == "TE")
                        return controllerName == "ManageWarranty";

                    if (roleIdMenu == "SL")
                        return controllerName == "ManageSaleInvoice";

                    return false;
                };
            }
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-white" asp-area="Admin" asp-controller="Dashboard" asp-action="Index">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            <i class="material-icons opacity-10">dashboard</i>
                        </div>
                        <span class="nav-link-text ms-1">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageProduct"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageProduct" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory_2</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí sản phẩm</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory_2</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí sản phẩm</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageCustomer"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageCustomer" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">people</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí khách hàng</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">people</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí khách hàng</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageEmployee"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageEmployee" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">badge</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhân viên</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">badge</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhân viên</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageSaleInvoice"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageSaleInvoice" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">receipt</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí hóa đơn</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">receipt</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí hóa đơn</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageStockImport"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageStockImport" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhập hàng</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhập hàng</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageStockExport"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageStockExport" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory_2</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí xuất hàng</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">inventory_2</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí xuất hàng</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageWarranty"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageWarranty" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">build</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí bảo hành</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">build</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí bảo hành</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageBrand"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageBrand" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">branding_watermark</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí thương hiệu</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">branding_watermark</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí thương hiệu</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManageSupplier"))
                    {
                        <a class="nav-link text-white active bg-gradient-primary" asp-area="Admin" asp-controller="ManageSupplier" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">local_shipping</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhà cung cấp</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">local_shipping</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí nhà cung cấp</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("ManagePromotion"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="ManagePromotion" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">local_offer</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí khuyến mại</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">local_offer</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Quản lí khuyến mại</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("StatisticalReport"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="StatisticalReport" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">bar_chart</i>
                            </div>
                            <span class="nav-link-text ms-1">Báo cáo thống kê</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">bar_chart</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Báo cáo thống kê</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("History"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="History" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">history</i>
                            </div>
                            <span class="nav-link-text ms-1">Lịch sử hoạt động</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">history</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Lịch sử hoạt động</span>
                        </span>
                    }
                </li>
                <li class="nav-item">
                    @if (HasPermissionMenu("Chat"))
                    {
                        <a class="nav-link text-white" asp-area="Admin" asp-controller="Chat" asp-action="Index">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">chat</i>
                            </div>
                            <span class="nav-link-text ms-1">Tư vấn hỗ trợ</span>
                        </a>
                    }
                    else
                    {
                        <span class="nav-link text-white" style="opacity: 0.5; cursor: not-allowed;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">chat</i>
                                <i class="material-icons opacity-10 ms-1" style="font-size: 16px;">lock</i>
                            </div>
                            <span class="nav-link-text ms-1">Tư vấn hỗ trợ</span>
                        </span>
                    }
                </li>
                <li class="nav-item mt-3">
                    <h6 class="ps-4 ms-2 text-uppercase text-xs text-white font-weight-bolder opacity-8">Account pages</h6>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-white" asp-area="Admin" asp-controller="ManageProfile" asp-action="Index">
                        <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                            @{
                                var avatar = Context.Session.GetString("Avatar");
                                var employeeName = Context.Session.GetString("EmployeeName") ?? "Nhân viên";
                                var config = Context.RequestServices.GetService(typeof(IConfiguration)) as IConfiguration;
                                var apiBaseUrl = config?.GetValue<string>("ApiSettings:BaseUrl") ?? "http://localhost:5068";
                                var imageBaseUrl = apiBaseUrl + "/imageEmployees";
                                var avatarUrl = !string.IsNullOrEmpty(avatar)
                                ? $"{imageBaseUrl}/{avatar}"
                                : "/LayoutAdmin/assets/img/default-avatar.png";
                            }
                            <img src="@avatarUrl" alt="@employeeName" class="rounded-circle" style="width: 32px; height: 32px; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.3);">
                        </div>
                        <span class="nav-link-text ms-1">@employeeName</span>
                    </a>
                </li>
                <li class="nav-item">
                    <form method="post" asp-area="Admin" asp-controller="SignIn" asp-action="SignOut" style="display: inline;">
                        @Html.AntiForgeryToken()
                        <button type="submit" class="nav-link text-white border-0 bg-transparent w-100 text-start" style="cursor: pointer;">
                            <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                                <i class="material-icons opacity-10">logout</i>
                            </div>
                            <span class="nav-link-text ms-1">Đăng xuất</span>
                        </button>
                    </form>
                </li>
            </ul>
    </aside>
    <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
        @RenderBody()
    </main>
    <!--   Core JS Files   -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="/LayoutAdmin/assets/js/core/popper.min.js"></script>
    <script src="/LayoutAdmin/assets/js/core/bootstrap.min.js"></script>
    <script src="/LayoutAdmin/assets/js/plugins/perfect-scrollbar.min.js"></script>
    <script src="/LayoutAdmin/assets/js/plugins/smooth-scrollbar.min.js"></script>
    <!-- Github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="/LayoutAdmin/assets/js/material-dashboard.min.js?v=3.1.0"></script>

    <script>
        $(document).ready(function() {
            var employeeId = '@Context.Session.GetString("EmployeeId")';
            if (employeeId) {
                $.ajaxSetup({
                    headers: {
                        'X-EmployeeId': employeeId
                    }
                });
            }
        });
    </script>

    @RenderSection("Scripts", required: false)
</body>

</html>

